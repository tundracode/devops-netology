# Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"

1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

В Linux `ip a`, Windows - `ipconfig /all`

2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

`Link Layer Discovery Protocol (LLDP)` — протокол канального уровня, который позволяет сетевым устройствам анонсировать в сеть информацию о себе и о своих возможностях, а также собирать эту информацию о соседних устройствах. В Linux реализация `IEEE 802.1ab (LLDP)` пакет `lldpd`.

3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

Технология `VLAN (Virtual Local Area Network)` — группа устройств, имеющих возможность взаимодействовать между собой напрямую на канальном уровне, хотя физически при этом они могут быть подключены к разным сетевым коммутаторам. В Linux пакет называется `vlan`. `Netplan` — это утилита сетевых настроек с помощью командной строки для управления и сетевых настроек в системах Ubuntu. Cетевая конфигурацию, описывается в файле `/etc/netplan/*.yaml`. Для настройки `vlan` нужно добавить в свой конфиг секцию `vlans`:
```bash
vlans:
  vlan50:
    id: 50
    link: eth0
    dhcp4: no
    addresses: [192.168.1.2/24]
    gateway: 192.168.1.1
    routes:
        - to: 192.168.1.2/24
         via: 192.168.1.1
         on-link: true
```

После настройки сети, для того что бы конфигурация была применена, применяется команда `netplan apply`
Команда проверит конфиг на наличие ошибок и применит его в случае успеха. Далее конфиг будет сам подниматься при перезагрузке системы.

4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

Для агрегации интерфейсов в Linux применяют две технологии `NIC Teaming` или `Bonding`. С помощью `Bonding` мы можем объединить интерфейсы с целью обеспечения отказоустойчивости и/или повышения пропускной способности. Пример конфига:

```bash
network:
    version: 2
    renderer: networkd
    ethernets:
        ens2f0: {}
        ens2f1: {}
    bonds:
        bond0:
            dhcp4: no
            interfaces:
            - ens2f0
            - ens2f1
            parameters:
                mode: active-backup
            addresses:
                - 192.168.122.195/24
            gateway4: 192.168.122.1
            mtu: 1500
            nameservers:
                addresses:
                    - 8.8.8.8
                    - 77.88.8.8
```
настройка `parameters mode` указываем на тип объединения — доступны варианты:
- `balance-rr` (задействуются оба интерфейса по очереди, распределение пакетов по принципу Round Robin).
- `active-backup` (используется только один интерфейс, второй активируется в случае неработоспособности первого).
- `balance-xor` (задействуются оба интерфейса по очереди, распределение пакетов на основе политики хеширования xmit_hash_policy).
- `broadcast` (задействуются оба интерфейса одновременно, пакеты передаются все интерфейсы).
- `802.3ad` (задействуются оба интерфейса по очереди, распределение пакетов на основе политики хеширования xmit_hash_policy)
- `balance-tlb` (задействуются оба интерфейса по очереди, пакеты распределяются в соответствии с текущей нагрузкой)

5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

Всего 8 IP адресов в сети с маской /29. 2 адреса зарезервированы под адреса шлюза и броадкаста.
```bash
vagrant@vagrant:~$ sipcalc 10.10.10.0/29
-[ipv4 : 10.10.10.0/29] - 0

[CIDR]
Host address		- 10.10.10.0
Host address (decimal)	- 168430080
Host address (hex)	- A0A0A00
Network address		- 10.10.10.0
Network mask		- 255.255.255.248
Network mask (bits)	- 29
Network mask (hex)	- FFFFFFF8
Broadcast address	- 10.10.10.7
Cisco wildcard		- 0.0.0.7
Addresses in network	- 8
Network range		- 10.10.10.0 - 10.10.10.7
Usable range		- 10.10.10.1 - 10.10.10.6
```
Сеть с маской /24 можно разбить на 32 подсети с маской /29:

```bash
vagrant@vagrant:~$ sipcalc -s 29 10.10.10.0/24
-[ipv4 : 10.10.10.0/24] - 0

[Split network]
Network			- 10.10.10.0      - 10.10.10.7
Network			- 10.10.10.8      - 10.10.10.15
Network			- 10.10.10.16     - 10.10.10.23
Network			- 10.10.10.24     - 10.10.10.31
Network			- 10.10.10.32     - 10.10.10.39
Network			- 10.10.10.40     - 10.10.10.47
Network			- 10.10.10.48     - 10.10.10.55
Network			- 10.10.10.56     - 10.10.10.63
Network			- 10.10.10.64     - 10.10.10.71
Network			- 10.10.10.72     - 10.10.10.79
Network			- 10.10.10.80     - 10.10.10.87
Network			- 10.10.10.88     - 10.10.10.95
Network			- 10.10.10.96     - 10.10.10.103
Network			- 10.10.10.104    - 10.10.10.111
Network			- 10.10.10.112    - 10.10.10.119
Network			- 10.10.10.120    - 10.10.10.127
Network			- 10.10.10.128    - 10.10.10.135
Network			- 10.10.10.136    - 10.10.10.143
Network			- 10.10.10.144    - 10.10.10.151
Network			- 10.10.10.152    - 10.10.10.159
Network			- 10.10.10.160    - 10.10.10.167
Network			- 10.10.10.168    - 10.10.10.175
Network			- 10.10.10.176    - 10.10.10.183
Network			- 10.10.10.184    - 10.10.10.191
Network			- 10.10.10.192    - 10.10.10.199
Network			- 10.10.10.200    - 10.10.10.207
Network			- 10.10.10.208    - 10.10.10.215
Network			- 10.10.10.216    - 10.10.10.223
Network			- 10.10.10.224    - 10.10.10.231
Network			- 10.10.10.232    - 10.10.10.239
Network			- 10.10.10.240    - 10.10.10.247
Network			- 10.10.10.248    - 10.10.10.255
```


6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

100.64.0.0 — 100.127.255.255 (маска подсети 255.192.0.0 или /10) - Данная подсеть определена IANA как диапазон выделенный локальным сетям и рекомендована согласно RFC 6598 для использования в качестве адресов для `CGN (Carrier-Grade NAT)`. Подсеть 100.64.0.0/26 обеспечит адресами 62 хоста.

7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?

Linux:
- `ip neighbour show` - команда показывает таблицы с адресами соседних хостов.
- `ip neighbour flush` - команда очищает таблицы с записями о соседних хостах по указанным условиям.
- `ip neighbour delete` - удалить запись о соседнем хосте

Windows:
- `arp -a` - Отображает текущие таблицы кэшей ARP для всех интерфейсов.
- `arp -d *` - для удаления всех узлов
- `arp -d inet_addr` - удаляет узел, задаваемый `inet_addr`


